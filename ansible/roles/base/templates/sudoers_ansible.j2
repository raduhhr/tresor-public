# Tresor â€” sudo policy for the 'ansible' automation user
# Build phase: keep broad sudo, but enable logging so we can later whitelist commands.

# Log all commands run by 'ansible'
Defaults:ansible log_input,log_output
Defaults:ansible logfile="/var/log/sudo-ansible.log"

# Optional: full TTY I/O recordings (uncomment to enable and ensure dir exists)
Defaults:ansible iolog_dir="/var/log/sudo-io"

# Avoid the first-time lecture prompt for automation
Defaults:ansible !lecture

# Broad sudo during deploy phase (we'll lock this down later)
ansible ALL=(ALL) NOPASSWD:ALL
