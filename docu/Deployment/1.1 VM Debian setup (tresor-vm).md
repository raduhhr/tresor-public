Sure — here’s your **emoji-free, publication-ready version** of the `tresor-vm` setup document.
All emojis removed, formatting kept clean and Markdown-compatible for GitHub or your thesis.

---

````markdown
# tresor-vm — QA Simulation Setup

*(Updated: September 2025)*

`tresor-vm` is a safe, reproducible sandbox that mirrors the production homelab (“Tresor”) for testing Debian 12 + Ansible roles without touching physical hardware.

---

## Summary of Steps

### 0) Preparation (host)
Install virtualization tooling:
```bash
sudo apt install virt-manager qemu-kvm libvirt-daemon-system bridge-utils
````

If DNS or `virbr0` conflicts occur, adjust and restart:

```bash
sudo nano /etc/systemd/resolved.conf
# Example config:
#   DNS=1.1.1.1
#   DNSStubListener=udp
#   DNSStubListenerExtra=127.0.0.53

sudo pkill dnsmasq
sudo ip link delete virbr0
sudo systemctl restart systemd-resolved
sudo systemctl restart libvirtd
```

---

### 1) Create the VM

| Setting   | Value                                                                     |
| --------- | ------------------------------------------------------------------------- |
| Name      | `tresor-vm`                                                               |
| CPU / RAM | 4 vCPU / 8 GB RAM                                                         |
| Disk      | 100 GB QCOW2 → `/mnt/tresor-vm/tresor-qa.qcow2` (thin-provisioned on SSD) |
| Network   | libvirt NAT (`virbr0`, `192.0.2.0/24`)                                    |

#### Disk layout (manual)

| Device                | FS   | Mount | Notes       |
| --------------------- | ---- | ----- | ----------- |
| `vda1`                | ext4 | `/`   | system root |
| `vda5`                | swap | 1 GB  | small swap  |
| No LVM or encryption. |      |       |             |

---

### 2) Debian 12 (Graphical Install)

| Option             | Value                                                                 |
| ------------------ | --------------------------------------------------------------------- |
| ISO                | `debian-12.x-amd64-netinst.iso`                                       |
| Hostname           | `tresor-vm`                                                           |
| Domain             | (blank)                                                               |
| Networking         | DHCP via `virbr0`                                                     |
| Users              | skip root password (disables root login); create `mainuser` with sudo |
| Software selection | SSH server, Standard system utilities (no desktop)                    |

#### Post-install state

* SSH reachable on DHCP IP (for example `192.0.2.10`)
* `mainuser` can sudo
* Root login disabled
* QCOW2 shows about 100 GB allocated; host volume has ample free space

---

## Filesystem Info

| Path              | Description                              |
| ----------------- | ---------------------------------------- |
| `/mnt/tresor-vm/` | Folder holding VM disk                   |
| `tresor-qa.qcow2` | 100 GB dynamic QCOW2 image               |
| Host free space   | about 200 GB available on backing device |

---

## Simulation Goals (validation)

| Component                | Matches Prod? | Notes                             |
| ------------------------ | ------------- | --------------------------------- |
| Debian 12 NetInstall     | Yes           | Same ISO and process              |
| Hostname / user model    | Yes           | `tresor-vm`, `mainuser` with sudo |
| Root login disabled      | Yes           |                                   |
| Network model            | Yes           | NAT via `virbr0` (`192.0.2.0/24`) |
| Disk on SSD (logic/data) | Yes           | Mirrors production layout         |
| Ansible no-touch policy  | Yes           | Ready and verified separately     |

---

**Result:**
`tresor-vm` provides a controlled, reproducible testbed mirroring the production Tresor node—ideal for dry runs of Ansible roles, network policy checks, and configuration testing.

```

